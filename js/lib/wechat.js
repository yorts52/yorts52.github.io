var WeixinApi=function(){"use strict";function e(e,i){i=i||{};var n=function(e){WeixinJSBridge.invoke("shareTimeline",{appid:e.appId?e.appId:"",img_url:e.imgUrl,link:e.link,desc:e.title,title:e.desc,img_width:"640",img_height:"640"},function(e){switch(e.err_msg){case"share_timeline:cancel":i.cancel&&i.cancel(e);break;case"share_timeline:confirm":case"share_timeline:ok":i.confirm&&i.confirm(e);break;case"share_timeline:fail":default:i.fail&&i.fail(e)}i.all&&i.all(e)})};WeixinJSBridge.on("menu:share:timeline",function(a){i.async&&i.ready?(window._wx_loadedCb_=i.dataLoaded||new Function,window._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0&&(window._wx_loadedCb_=new Function),i.dataLoaded=function(e){window._wx_loadedCb_(e),n(e)},i.ready&&i.ready(a)):(i.ready&&i.ready(a),n(e))})}function i(e,i){i=i||{};var n=function(e){WeixinJSBridge.invoke("sendAppMessage",{appid:e.appId?e.appId:"",img_url:e.imgUrl,link:e.link,desc:e.desc,title:e.title,img_width:"640",img_height:"640"},function(e){switch(e.err_msg){case"send_app_msg:cancel":i.cancel&&i.cancel(e);break;case"send_app_msg:confirm":case"send_app_msg:ok":i.confirm&&i.confirm(e);break;case"send_app_msg:fail":default:i.fail&&i.fail(e)}i.all&&i.all(e)})};WeixinJSBridge.on("menu:share:appmessage",function(a){i.async&&i.ready?(window._wx_loadedCb_=i.dataLoaded||new Function,window._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0&&(window._wx_loadedCb_=new Function),i.dataLoaded=function(e){window._wx_loadedCb_(e),n(e)},i.ready&&i.ready(a)):(i.ready&&i.ready(a),n(e))})}function n(e,i){i=i||{};var n=function(e){WeixinJSBridge.invoke("shareWeibo",{content:e.desc,url:e.link},function(e){switch(e.err_msg){case"share_weibo:cancel":i.cancel&&i.cancel(e);break;case"share_weibo:confirm":case"share_weibo:ok":i.confirm&&i.confirm(e);break;case"share_weibo:fail":default:i.fail&&i.fail(e)}i.all&&i.all(e)})};WeixinJSBridge.on("menu:share:weibo",function(a){i.async&&i.ready?(window._wx_loadedCb_=i.dataLoaded||new Function,window._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0&&(window._wx_loadedCb_=new Function),i.dataLoaded=function(e){window._wx_loadedCb_(e),n(e)},i.ready&&i.ready(a)):(i.ready&&i.ready(a),n(e))})}function a(e,i){i=i||{};var n=function(e,n){if("timeline"==e.shareTo){var a=n.title;n.title=n.desc||a,n.desc=a}e.generalShare({appid:n.appId?n.appId:"",img_url:n.imgUrl,link:n.link,desc:n.desc,title:n.title,img_width:"640",img_height:"640"},function(n){switch(n.err_msg){case"general_share:cancel":i.cancel&&i.cancel(n,e.shareTo);break;case"general_share:confirm":case"general_share:ok":i.confirm&&i.confirm(n,e.shareTo);break;case"general_share:fail":default:i.fail&&i.fail(n,e.shareTo)}i.all&&i.all(n,e.shareTo)})};WeixinJSBridge.on("menu:general:share",function(a){i.async&&i.ready?(window._wx_loadedCb_=i.dataLoaded||new Function,window._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0&&(window._wx_loadedCb_=new Function),i.dataLoaded=function(e){window._wx_loadedCb_(e),n(a,e)},i.ready&&i.ready(a,a.shareTo)):(i.ready&&i.ready(a,a.shareTo),n(a,e))})}function d(e,i){i=i||{},WeixinJSBridge.invoke("addContact",{webtype:"1",username:e},function(e){var n=!e.err_msg||"add_contact:ok"==e.err_msg||"add_contact:added"==e.err_msg;n?i.success&&i.success(e):i.fail&&i.fail(e)})}function o(e,i){e&&i&&0!=i.length&&WeixinJSBridge.invoke("imagePreview",{current:e,urls:i})}function r(){WeixinJSBridge.call("showOptionMenu")}function t(){WeixinJSBridge.call("hideOptionMenu")}function c(){WeixinJSBridge.call("showToolbar")}function l(){WeixinJSBridge.call("hideToolbar")}function s(e){e&&"function"==typeof e&&WeixinJSBridge.invoke("getNetworkType",{},function(i){e(i.err_msg)})}function _(){WeixinJSBridge.call("closeWindow")}function w(e){if(e&&"function"==typeof e){var i=this,n=function(){e(i)};"undefined"==typeof window.WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",n,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",n),document.attachEvent("onWeixinJSBridgeReady",n)):n()}}return{version:"2.0",ready:w,shareToTimeline:e,shareToWeibo:n,shareToFriend:i,generalShare:a,addContact:d,showOptionMenu:r,hideOptionMenu:t,showToolbar:c,hideToolbar:l,getNetworkType:s,imagePreview:o,closeWindow:_}}();