var Calendar=function(t){this.date=t?t:new Date,this.cDate={toString:function(){return this.tg+this.dz+"年("+this.sx+")"+this.yf+"月"+this.rq+this.sj}},this.init(),this.calc()};Calendar.prototype={constructor:Calendar,cDays:[0,31,59,90,120,151,181,212,243,273,304,334],cData:[268949,3402,3493,133973,1386,464219,605,2349,334123,2709,2890,267946,2773,592565,1210,2651,395863,1323,2707,265877],CSTR:{TG:"甲乙丙丁戊己庚辛壬癸",DZ:"子丑寅卯辰巳午未申酉戌亥",SX:"鼠牛虎兔龙蛇马羊猴鸡狗猪",RQ:"一二三四五六七八九十",YF:"正二三四五六七八九十冬腊",XQ:"日一二三四五六"},getBit:function(t,a){return this.cData[t]>>a&1},init:function(){var t,a,h,i,s=!1,e=this.date.getFullYear();for(t=365*(e-2001)+Math.floor((e-2001)/4)+this.cDays[this.date.getMonth()]+this.date.getDate()-23,this.date.getYear()%4==0&&this.date.getMonth()>1&&t++,a=0;;a++){for(i=this.cData[a]<4095?11:12,h=i;h>=0;h--){if(t<=29+this.getBit(a,h)){s=!0;break}t=t-29-this.getBit(a,h)}if(s)break}this.cDate.Year=2001+a,this.cDate.Month=i-h+1,this.cDate.Day=t,12==i&&(this.cDate.Month==Math.floor(this.cData[a]/65536)+1&&(this.cDate.Month=1-this.cDate.Month),this.cDate.Month>Math.floor(this.cData[a]/65536)+1&&this.cDate.Month--),this.cDate.Hour=Math.floor((this.date.getHours()+1)/2)},calc:function(){var t=this.cDate.Year-4;this.cDate.tg=this.CSTR.TG.charAt(t%10),this.cDate.dz=this.CSTR.DZ.charAt(t%12),this.cDate.sx=this.CSTR.SX.charAt(t%12),this.cDate.yf=this.CSTR.YF.charAt(this.cDate.Month-1),this.cDate.Month<1&&(this.cDate.yf="闰"+this.CSTR.YF.charAt(-this.cDate.Month-1)),this.cDate.rq=this.cDate.Day<11?"初":this.cDate.Day<20?"十":this.cDate.Day<30?"廿":"卅",this.cDate.Day%10==0&&10!=this.cDate.Day||(this.cDate.rq+=this.CSTR.RQ.charAt((this.cDate.Day-1)%10)),this.cDate.sj=this.CSTR.DZ.charAt(this.cDate.Hour%12)+"时",12==this.cDate.Hour&&(this.cDate.sj="夜"+this.cDate.sj)}};